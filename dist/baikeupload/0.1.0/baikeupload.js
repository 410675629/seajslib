/* 2013-04-11 */
define("baikeupload/0.1.0/baikeupload",[],function(){function i(i){var t=i.id,o=i.iframeid="__baikeUploadIframe"+t,r="baikeUploadForm"+t,u='<div style="position:absolute;left:-1000px;width:1px;height:1px;overflow:hidden;">		<form id="'+r+'" action="'+i.url+'" method="post" target="'+o+'" enctype="multipart/form-data" >		<input name="img_src_action" value="baike_logo_upload"/>		<input name="picWidthHeight" value="2"/>		<input name="picAlign" value="center"/>		<input name="picAlt" value="1"/>		<input type="file" name="photofile" />		</form>		<iframe id="'+o+'" name="'+o+'"></iframe>		</div>';$("body").append(u),setTimeout(function(){i.btn,a[t]=$("#baikeUploadForm"+t+" input[type=file]"),a[t].bind("change",function(){var n=$(this).val();if(e(n))$.isFunction(i.uploading)&&i.uploading(),$("#"+r).trigger("submit");else{var t="提示：请选择一个有效的图片(jpg|jpeg|gif|png)文件";$.isFunction(i.error)?i.error(t):alert(t)}}),$("#"+o).load(function(){n(i)})},0)}function e(i){return i&&/\.(jpg|jpeg|gif|png)$/i.test(i)}function n(i){var e="上传失败，请稍候再试",n="",t=!1;try{var o=window.frames[i.iframeid];n=o.f,t=o.info_flag}catch(a){e="可能存在跨域问题，对返回后的iframe没有读取权限",$.isFunction(i.error)?i.error(e):alert(e)}t!==!1&&(e=r[t]||e),n?$.isFunction(i.success)&&i.success(n):$.isFunction(i.error)?i.error(e):alert(e),$.isFunction(i.complete)&&i.complete()}var t={},o={url:"",uploading:function(){},success:function(i){alert(i)},error:function(i){alert(i)},complete:function(){}},a={},r=["没有检测到上传文件!","图片超过规定大小，请压缩后再上传！","图片类型不支持，只允许上传jpg,jpeg,gif和png图片！","同步登录信息丢失，暂时不能上传图片！","您的权限不够，请与管理员联系！","","您上传的图片涉嫌违禁内容，请重新选择图片上传！",""];$.fn.baikeUpload=function(e){e=$.extend({},o,e),this.each(function(n,o){var r="_"+Math.round(1e5*Math.random());t[r]=e,e.id=r,i(e),e.btn=$(o),$(o).click(function(){a[r].click()})})}});