/* 2013-04-12 */
define("validator/1.1.0/validator",[],function(){}),function(t){var r,e,n,a,i,o,u,c,s,l,d,f,h,p,m=[],v={};r={email:function(t){return/^(?:[a-z0-9]+[_\-+.]?)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},date:function(t){var r,e,n=/^([1-2]\d{3})([-/.])?(1[0-2]|0?[1-9])([-/.])?([1-2]\d|3[01]|0?[1-9])$/;return n.test(t)?(r=n.exec(t),year=+r[1],month=+r[3]-1,day=+r[5],e=new Date(year,month,day),year===e.getFullYear()&&month===e.getMonth()&&day===e.getDate()):!1},mobile:function(t){return/^1[3-9]\d{9}$/.test(t)},tel:function(t){return/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/.test(t)},number:function(t){var r=+this.$item.attr("min"),e=+this.$item.attr("max"),n=/^\-?(?:[1-9]\d*|0)(?:[.]\d)?$/.test(t),t=+t,a=+this.$item.attr("step");return isNaN(r)&&(r=t-1),isNaN(e)&&(e=t+1),n&&(isNaN(a)||0>=a?t>=r&&e>=t:0===(t+r)%a&&t>=r&&e>=t)},range:function(t){return this.number(t)},url:function(t){var r,e="((https?|s?ftp|irc[6s]?|git|afp|telnet|smb):\\/\\/)?",n="([a-z0-9]\\w*(\\:[\\S]+)?\\@)?",a="([a-z0-9]([\\w]*[a-z0-9])*\\.)?[a-z0-9]\\w*\\.[a-z]{2,}(\\.[a-z]{2,})?",i="(:\\d{1,5})?",o="\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}",u="(\\/\\S*)?",c=[e,n,a,i,u],s=[e,n,o,i,u];return r=function(r){return RegExp("^"+r.join("")+"$","i").test(t)},r(c)||r(s)},password:function(t){return this.text(t)},checkbox:function(){return r._checker("checkbox")},radio:function(){return r._checker("radio")},_checker:function(r){var e=this.$item.parents("form").eq(0),n="input:"+r+'[name="'+this.$item.attr("name")+'"]',a=!1,i=t(n,e);return i.each(function(t,r){return r.checked&&!a?a=!0:void 0}),a},text:function(t){var r=parseInt(this.$item.attr("maxlength"),10);return notEmpty=function(t){return!!t.length&&!/^\s+$/.test(t)},isNaN(r)?notEmpty(t):notEmpty(t)&&r>=t.length}},l=function(r,e,n){var a=r.data(),i=a.url,o=a.method||"get",u=a.key||"key",c=d(r),s={};s[u]=c,o=t.inArray(o,["get","post","getJSON"])>-1?o:"get",t[o](i,s).success(function(t){var a=t?"IM VALIDED":"unvalid",i=h.call(this,r,e,n,a);return i}).error(function(){})},f=function(r,e,n){var a="a"===r.data("aorb")?"b":"a",o=t("[data-aorb="+a+"]",r.parents("form").eq(0)),u=[r,e,n],c=[o,e,n],s=0;return s+=h.apply(this,u)?0:1,s+=h.apply(this,c)?0:1,s=s>0?(i.apply(this,u),i.apply(this,c),!1):h.apply(this,u.concat("unvalid"))},h=function(e,n,o,u){if(!e)return"DONT VALIDATE UNEXIST ELEMENT";var c,s,l,f,h,m;return c=e.attr("pattern"),c&&c.replace("\\","\\\\"),s=e.attr("type")||"text",required=e.attr("required"),"text"===s&&"true"!==required&&(s=required),s=r[s]?s:"text",l=t.trim(d(e)),f=e.data("event"),u=u?u:c?RegExp(c).test(l)||"unvalid":r[s](l)||"unvalid","unvalid"===u&&i(e,n,o),/^(?:unvalid|empty)$/.test(u)?(a.call(this,e,n,o,u),h={$el:e,type:s,error:u},e.trigger("error",e),m=p(e),m.inputError(e)):(i.call(this,e,n,o),h=!1),e.trigger("after:"+f,e),h},e=function(r,e){return t(r,e)},d=function(t){return t.val()||(t.is("[contenteditable]")?t.text():"")},validate=function(t,e){var n,a,i,o,u,c,s=e.errorClass,p=e.isErrorOnParent;return r.$item=t,i=t.attr("type"),o=d(t),n=t.data("url"),a=t.data("aorb"),c=t.data("event"),u=[t,s,p],c&&t.trigger("before:"+c,t),/^(?:radio|checkbox)$/.test(i)||a||r.text(o)?a?f.apply(this,u):n?l.apply(this,u):h.call(this,t,s,p):h.call(this,t,s,p,"empty")},c=function(r,e){var n=/^radio|checkbox/,a=e.method;t.each(r,function(r,i){var o=t(i);(n.test(i.type)||"SELECT"===i.tagName)&&(a="change blur"),o[o.on?"on":"bind"](a,function(){var r,a=t(this);n.test(this.type)&&(a=t("input[type="+this.type+"][name="+this.name+"]",a.closest("form"))),a.each(function(){var n=t(this);r=validate.call(this,n,e),r&&m.push(r)})})})},u=function(r,e){return m=t.map(r,function(r){var n=validate.call(null,t(r),e);return n?n:void 0})},s=function(r){var e,n;return(e=t.grep(m,function(t){return t.$el=r})[0])?(n=t.inArray(e,m),m.splice(n,1),m):void 0},n=function(t,r){var e=t;return t.data("parent")?e=t.closest(t.data("parent")):r&&(e=t.parent()),e},a=function(t,r,e,a){return n(t,e).addClass(r+" "+a)},i=function(t,r,e){return s.call(this,t),n(t,e).removeClass(r+" empty unvalid")},o=function(t){return t.attr("novalidate")||t.attr("novalidate","true")},t.fn.validator=function(r){var n=this,a={identifie:"[required]",errorClass:"error",isErrorOnParent:!1,method:"blur",before:function(){},after:function(){return!0},submitError:function(){return!0},inputError:function(){return!0}},r=t.extend({},a,r),s=r.identifie,l=r.isErrorOnParent,d=r.before,f=r.after,h=r.submitError,p=(r.inputError,e(s,n)),y="_"+ +new Date+Math.round(999999*Math.random());n.data("formid",y),v[y]=r,o(n),r.method&&c.call(this,p,r),n[n.on?"on":"bind"]("focusin",s,function(){i.call(this,t(this),"error unvalid empty",l)}),n[n.on?"on":"bind"]("submit",function(t){var e;return d.call(this,p),u.call(this,p,r),m.length?(t.preventDefault(),e=h.call(this,m)):e=f.call(this,t,p),e})},p=function(t){return v[t.closest("form").data("formid")]}}(jQuery);